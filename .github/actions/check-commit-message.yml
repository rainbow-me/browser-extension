name: Check Last Commit Message

on: [push]

jobs:
  check-commit-message:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
    
      - name: Get last commit message
        id: last-commit
        run: echo "::set-output name=message::$(git log -1 --pretty=%B)"
    
      - name: Bail out if commit message contains 'Version Bump (Internal)'
        run: |
          COMMIT_MESSAGE="${{ steps.last-commit.outputs.message }}"
          if [[ "$COMMIT_MESSAGE" == *"Version Bump (Internal)"* ]]; then
            echo "Commit message contains 'Version Bump (Internal)'. Exiting..."
            exit 1